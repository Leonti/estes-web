<div class="row">
	<div class="col-md-offset-3 col-md-6">
		<h1>Dish</h1>
		<div class="container-fluid dish-container">
			<div class="row dish-title">
				<div class="col-md-9">
					<editable class="dish-name" value="dish.name" placeholder="Dish name" />
				</div>
				<div class="col-md-1 dollar">$</div>
				<div class="col-md-2">
					<editable class="dish-price" value="dish.price" />					
				</div>
			</div>
			<div ui-sortable ng-model="dish.ingredients">
				<div class="row" ng-repeat="dishIngredients in dish.ingredients">
					<div class="col-md-12 ingredient-row">
						<span class="pull-left" ng-repeat="ingredient in dishIngredients">
							<span class="ingredient-title">
								{{ingredient.name}} 
								<span ng-show="ingredient.priceChange > 0">(+ ${{ingredient.priceChange}})</span>
								<span class="icon-close" ng-click="removeIngredient($parent.$index, $index)"></span>					
							</span><span class="ingredient-or" ng-hide="$last">or</span>
						</span>
						<div class="ingredient-add pull-right" ng-click="expandRow($index)" ng-class="{visible: $index == expandedRow}">
							<span class="icon-plus"></span>
							<div typeahead on-select="onTypeaheadSelectOr(item, $index)" items="filteredIngredients" class="ingredient-inline or-ingredient" ng-show="$index == expandedRow">
								<input typeahead-control type="text" class="form-control name" ng-model="newIngredientNames[$index]" 
									ng-change="filterIngredients(typeaheadItems, newIngredientNames[$index])"
									ng-focus="filterIngredients(typeaheadItems, newIngredientNames[$index])" placeholder="Name">
								<span class="money-sign">$</span>
								<input type="text" class="form-control price-change" 
									ng-model="newIngredientPriceChanges[$index]">
								<span class="controls">
									<span class="icon-checkmark ok" ng-click="orIngredientToDish($index)"></span>
									<span class="icon-cancel-circle" ng-click="orIngredientToDishCancel()"></span>	
								</span>
								<div class="typeahead" ng-show="isVisible()">
									<ul class="typeahead-items">
										<li typeahead-item="ingredient" class="typeahead-item" ng-repeat="ingredient in filteredIngredients">
											{{ingredient.name}}<span ng-show="ingredient.priceChange > 0"> (+ ${{ingredient.priceChange}})</span>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-12 ingredient-row" style="position: relative;">
					<div typeahead on-select="onTypeaheadSelect(item)" items="filteredIngredients" class="ingredient-inline pull-left">
						<input typeahead-control type="text" class="form-control name" ng-model="newIngredient.name" 
							ng-change="filterIngredients(typeaheadItems, newIngredient.name)"
							ng-focus="filterIngredients(typeaheadItems, newIngredient.name)" placeholder="Name">
						<span class="money-sign">$</span>
						<input type="text" class="form-control price-change" 
							ng-model="newIngredient.priceChange">
						<span class="controls">
							<span class="icon-checkmark ok" ng-click="addIngredientToDish()"></span>
						</span>
						<div class="typeahead" ng-show="isVisible()">
							<ul class="typeahead-items">
								<li typeahead-item="ingredient" class="typeahead-item" ng-repeat="ingredient in filteredIngredients">
									{{ingredient.name}}<span ng-show="ingredient.priceChange > 0"> (+ ${{ingredient.priceChange}})</span>
								</li>
							</ul>
						</div>
					</div>
				</div>					
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="col-md-offset-3 col-md-6">
		<div class="dish-buttons pull-right">
			<button type="button" class="btn btn-primary btn-lg">Save</button>
	  		<button type="button" class="btn btn-default btn-lg">Cancel</button>
		</div>
	</div>	
</div>
